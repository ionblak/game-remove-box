{"version":3,"sources":["webpack:///./js/utils.js","webpack:///./js/game.js","webpack:///./js/storage.js"],"names":["getRandomIntInclusive","min","max","Math","ceil","floor","random","getRandColor","color","pow","toString","length","refs","startButton","document","querySelector","veiwPort","timer","modal","saveButton","points","modalPointsField","modalInput","recordsList","newGamebutton","timerId","playingGame","time","totalPoints","name","startGame","setAttribute","removeAttribute","createBoxes","startTimer","setInterval","textContent","clearInterval","clearAllboxes","classList","add","amount","i","positionTop","positionLeft","box","createElement","size","appendChild","innerHTML","addEventListener","event","target","currentTarget","currentBoxRef","remove","value","insertAdjacentHTML","result","localStorage","setItem","JSON","stringify","err","console","error","getCurrentResult","preventDefault","savedResult","getItem","parsedresult","parse","loadingResult"],"mappings":"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","file":"main.79554bc09b25d791e722.js","sourcesContent":["function getRandomIntInclusive(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются\r\n}\r\n\r\nfunction getRandColor() {\r\n  let color = Math.floor(Math.random() * Math.pow(256, 3)).toString(16);\r\n  while (color.length < 6) {\r\n    color = '0' + color;\r\n  }\r\n  return '#' + color;\r\n}\r\nconst refs = {\r\n  startButton: document.querySelector('.js-startButton'),\r\n  veiwPort: document.querySelector('.window-game'),\r\n  timer: document.querySelector('.timer'),\r\n  modal: document.querySelector('.lightbox'),\r\n  saveButton: document.querySelector('.js-modal__button'),\r\n  points: document.querySelector('.js-points'),\r\n  modalPointsField: document.querySelector('.modal-points'),\r\n  modalInput: document.querySelector('.form-control'),\r\n  recordsList: document.querySelector('.list'),\r\n  newGamebutton: document.querySelector('.js-newGameButton'),\r\n};\r\n\r\nexport { getRandomIntInclusive, getRandColor, refs };\r\n","import { getRandomIntInclusive, getRandColor, refs } from './utils.js';\r\nimport { getCurrentResult, loadingResult } from './storage.js';\r\n\r\nlet playingGame = false;\r\nlet time = 60000;\r\nlet totalPoints = 0;\r\nlet name = '';\r\nlet timerId;\r\n\r\nrefs.startButton.addEventListener('click', startGame);\r\nrefs.veiwPort.addEventListener('click', clickDestroyBoxes);\r\nrefs.saveButton.addEventListener('click', savePoints);\r\nrefs.newGamebutton.addEventListener('click', begingNewGame);\r\n\r\nloadingResult();\r\n\r\nfunction clickDestroyBoxes(event) {\r\n  if (event.target === event.currentTarget) {\r\n    return;\r\n  }\r\n  const currentBoxRef = event.target;\r\n  totalPoints += 1;\r\n  refs.points.textContent = totalPoints;\r\n\r\n  currentBoxRef.remove();\r\n  createBoxes();\r\n}\r\n\r\nfunction startGame() {\r\n  if (playingGame) {\r\n    refs.startButton.setAttribute('disabled', 'true');\r\n  } else {\r\n    time = 60000;\r\n    playingGame = true;\r\n    refs.startButton.removeAttribute('disabled');\r\n    createBoxes();\r\n    startTimer(time);\r\n  }\r\n}\r\n\r\nfunction startTimer(time) {\r\n  timerId = setInterval(() => {\r\n    time -= 1000;\r\n    refs.timer.textContent = time / 1000;\r\n    if (time === 0) {\r\n      clearInterval(timerId);\r\n      openModal();\r\n    }\r\n  }, 1000);\r\n}\r\n\r\nfunction begingNewGame() {\r\n  if (playingGame) {\r\n    clearAllboxes();\r\n    clearInterval(timerId);\r\n    refs.points.textContent = 0;\r\n    refs.timer.textContent = '01:00';\r\n    time = 60000;\r\n    totalPoints = 0;\r\n    startTimer(time);\r\n    createBoxes();\r\n  }\r\n  startGame();\r\n}\r\n\r\nfunction openModal() {\r\n  clearAllboxes();\r\n  refs.modal.classList.add('is-open');\r\n  refs.modalPointsField.textContent = totalPoints;\r\n}\r\n\r\nfunction savePoints(event) {\r\n  name = refs.modalInput.value;\r\n  refs.modal.classList.remove('is-open');\r\n  refs.recordsList.insertAdjacentHTML(\r\n    'beforeend',\r\n    `<li class=\"list-item\">${name}........${totalPoints} points</li>`,\r\n  );\r\n  getCurrentResult(name, totalPoints);\r\n  event.preventDefault();\r\n}\r\n\r\nfunction createBoxes() {\r\n  const amount = getRandomIntInclusive(1, 3);\r\n\r\n  for (let i = 0; i < amount; i += 1) {\r\n    const positionTop = getRandomIntInclusive(5, 90);\r\n    const positionLeft = getRandomIntInclusive(90, 5);\r\n    const box = document.createElement('div');\r\n    const size = getRandomIntInclusive(10, 30);\r\n    box.setAttribute(\r\n      'style',\r\n      `width: ${size}px; height: ${size}px;\r\n     position: absolute; top: ${positionTop}%; left: ${positionLeft}%; background-color: ${getRandColor()}`,\r\n    );\r\n    refs.veiwPort.appendChild(box);\r\n  }\r\n}\r\n\r\nfunction clearAllboxes() {\r\n  refs.veiwPort.innerHTML = '';\r\n}\r\n","import { refs } from './utils.js';\r\n\r\nfunction getCurrentResult(name, totalPoints) {\r\n  try {\r\n    const result = {\r\n      name,\r\n      totalPoints,\r\n    };\r\n    localStorage.setItem('result', JSON.stringify(result));\r\n  } catch (err) {\r\n    console.error('Set state error: ', err);\r\n  }\r\n}\r\n\r\nfunction loadingResult() {\r\n  try {\r\n    const savedResult = localStorage.getItem('result');\r\n    const parsedresult = JSON.parse(savedResult);\r\n    refs.recordsList.insertAdjacentHTML(\r\n      'beforeend',\r\n      `<li class=\"list-item\">${parsedresult.name}........${parsedresult.totalPoints} points</li>`,\r\n    );\r\n  } catch (err) {\r\n    console.error('Set state error: ', err);\r\n  }\r\n}\r\n\r\nexport { getCurrentResult, loadingResult };\r\n"],"sourceRoot":""}